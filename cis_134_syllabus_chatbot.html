<!DOCTYPE html>
<html>
<head>
  <title>CIS 134 Syllabus Chatbot</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    #chatbox { border: 1px solid #ccc; padding: 10px; height: 400px; overflow-y: auto; margin-bottom: 10px; }
    #input { width: 100%; padding: 10px; }
  </style>
</head>
<body>
  <h2>CIS 134 Syllabus Chatbot</h2>
  <div id="chatbox"></div>
  <input type="text" id="input" placeholder="Ask a question like 'When is the final exam?'" />

  <script>
    let syllabus = {};

    async function loadSyllabus() {
      const response = await fetch('https://raw.githubusercontent.com/LH-Scarborough/CIS134-Chatbot-Summer2025/refs/heads/main/course_syllabus.json');
      syllabus = await response.json();
    }

    function respond(question) {
      const q = question.toLowerCase();
      if (q.includes('instructor')) return `The instructor is ${syllabus.instructor.name}, email: ${syllabus.instructor.email}`;
      if (q.includes('final exam')) return `The final exam is on ${syllabus.final_exam_date}`;
      if (q.includes('office hours')) return `Office hours: ${syllabus.instructor.office_hours.join(', ')}`;
      if (q.includes('grade') || q.includes('grading')) {
        return `Grading: Review Questions (40%), Labs (40%), Exams (20%)`;
      }
      if (q.includes('late')) return syllabus.policies.late_work;
      if (q.includes('plagiarism')) return syllabus.policies.plagiarism;
      if (q.includes('contact')) return `Email: ${syllabus.instructor.email}, Phone: ${syllabus.instructor.phone}`;
      return "I'm not sure about that. Please refer to the full syllabus or contact your instructor.";
    }

    document.getElementById('input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        const userText = this.value;
        const botReply = respond(userText);
        document.getElementById('chatbox').innerHTML += `<p><strong>You:</strong> ${userText}</p><p><strong>Bot:</strong> ${botReply}</p>`;
        this.value = '';
        document.getElementById('chatbox').scrollTop = document.getElementById('chatbox').scrollHeight;
      }
    });

    loadSyllabus();
  </script>
</body>
</html>
